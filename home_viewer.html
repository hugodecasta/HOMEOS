<html>


<head>
    <title>Home Viewer</title>
</head>

<body>

    <!--- ------------------------------------------------------------------ -->

    <h2 class='state' id='state'>no state</h2>
    <input id='state_input'><button onclick="set_state()">set state</button>

    <!--- ------------------------------------------------------------------ -->

    <script src='http://192.168.43.214:8000/socket.io/socket.io.js'></script>
    <script>
        class RObject {
            constructor(port, callback = () => { }) {
                this.socket = io.connect('http://192.168.43.214:' + port)
                this.socket.on('put', callback)
            }
            poke(data) {
                this.socket.emit('poke')
            }
            advice(data) {
                this.socket.emit('advice', data)
            }
        }
        let kinect = new RObject(8000)
        let state = new RObject(9876, (state) => {
            document.getElementById('state').innerHTML = state
        })
        state.poke()
        function setpoint(name) {
            state.advice(name)
        }

        function set_state() {
            let name = document.getElementById('state_input').value
            setpoint(name)
        }
    </script>

</body>

</html>